<tabset vertical="true">
  <tab active="$first" ng-repeat="table_type in table_types">
    <tab-heading>
      {{ table_type.name }}<span class="round warning label">{{ table_type.queue_registrations.length }}</span>
    </tab-heading>
        <h4>当前号码</h4>
        <table>
            <thead>
            <tr>
                <th>号码</th>
                <th>手机尾号</th>
                <th>操作</th>
            </tr>
            </thead>

            <tbody>
            <tr>
                <td width="200px">
                    <span ng-if="table_type.current_registration==null">空闲</span>
                    <span ng-if="table_type.current_registration">
                        {{ table_type.current_registration.queue_number }}
                    </span>
                </td>

                <td width="200px">
                    <span ng-if="table_type.current_registration==null">无</span>
                    <span ng-if="table_type.current_registration">
                        {{ table_type.current_registration.phone }}
                    </span>
                </td>

                <td>
                    <span ng-if="table_type.queue_registrations.length==0 && table_type.current_registration==null">等待客户中...</span>
                    <button class="button tiny" ng-if="table_type.current_registration==null && table_type.queue_registrations.length != 0" ng-click="next_reg('start', table_type)">开始叫号</button>
                    <button class="button tiny" ng-if="table_type.current_registration!=null" ng-click="next_reg('expired', table_type)">就餐</button>
                    <button class="button tiny" ng-if="table_type.current_registration!=null" ng-click="next_reg('passed', table_type)">过号</button>
                </td>
            </tr>
            </tbody>
        </table>

        <h4>排队中</h4>
        <table>
            <thead>
            <tr>
                <th width="150">号码</th>
                <th width="150">等待时间</th>
                <th width="150">手机尾号</th>
            </tr>
            </thead>

            <tbody>
            <tr ng-repeat="reg in table_type.queue_registrations">
                <td>{{ reg.queue_number }}</td>
                <td>{{ reg.waiting_time }}</td>
                <td>{{ reg.last4_phone }}</td>
            </tr>

            </tbody>
        </table>
    </tab>
</tabset>
